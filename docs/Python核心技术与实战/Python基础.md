

# 一、基础语法

## - Jupyter Notebook

Jupyter已经成为一个几乎支持所有语言，能够把软件代码、计算输出、解释文档、多媒体资源整合在一起的多功能科学运算平台。

优点：

- 整合所有资源

- 交互性编程体验

- 零成本重现结果



【】通过Python核心技术课程02节补充



## - 列表(list)和元组(tuple)

列表和元组，都是一个可以放置任意数据类型的有序集合。

在绝大多数编程语言中，集合的数据类型必须一致，但对于Python的列表和元组来说，并无此要求。



### 基础



### 存储方式差异



### 性能



### 使用场景





### 小结

#### 列表元组的区别

列表和元组都是有序的，可以存储任意数据类型的集合，区别主要在于下面两点

- 列表是动态的，长度可变，可以随意地增加、删减或改变元素；列表的存储空间略大于元组，性能略逊于元组。
- 元组是静态的，长度大小固定，不可以对元素进行增加、删减或者改变操作。元组对于列表更加轻量级，性能稍优。







## - 字典(dict)、集合(set)

惨Python核心技术04补充



### 小结

#### Python代码运行时间测试timeit模块

Python3中的timeit模块可以用来测试小段代码的运行时间。其中主要通过两个函数来实现：timeit和repeat。

```python
import timeit

print(timeit.timeit("dict()"))
0.101161517

print(timeit.timeit("{}"))
0.03400424400000002

print(timeit.timeit("dict()", number=10))
1.8110000000182147e-06
print(timeit.timeit("{}", number=10))
9.049999999954927e-07
```



#### Python代码分析工具之dis模块

Python是用C实现的，所以对于Python的性能或代码质量的评估可以通过dis模块获取到对应的字节码指令来进行评估。

**Python代码是先被编译为Python字节码后，再由Python虚拟机来执行Python字节码**（pyc文件主要就是用于存储字节码指令的）。一般来说一个Python语句会对应若干字节码指令，Python的字节码是一种类似汇编指令的中间语言，但是一个字节码指令并不是对应一个机器指令（二进制指令），而是对应一段C代码，而不同的指令的性能不同，所以不能单独通过指令数量来判断代码的性能。

一个Python的程序由若干代码块组成，例如一个Python文件会是一个代码块，一个类、一个函数都是一个代码块，一个代码块会对应一个运行的上下文环境以及一系列的字节码指令。

Python标准库中的语言工具-dis是Python字节码反汇编工具。dis模块主要是用来分析字节码的一个内置模块，经常会用到的方法是dis.dis([bytesource]),参数作为一个代码块，可以得到这个代码块对应的字节码指令序列。它可以调试错误，还有助于发现性能问题。



dis分析：

```python
#!/usr/bin/env python3
# -*- coding: utf-8 -*-

import dis
import sys

'''
Python代码分析工具dis分析字节码
'''
```

```python
dis.dis(lambda : dict())

 10           0 LOAD_GLOBAL              0 (dict)
              2 CALL_FUNCTION            0
              4 RETURN_VALUE
```

```python
dis.dis(lambda : {})

12           0 BUILD_MAP                0
              2 RETURN_VALUE
```

通过timeit模块测试dict(),{}消耗的时间亦可得{}耗时较短。



#### 如下两种初始化字典的方式，哪种更高效？

```Python
# Option A
dict1 = {'name': 'jason', 'age': 20, 'gender': 'male'}

# Option B
dict2 = dict({'name': 'jason', 'age':20, 'gender': 'male'})
```

直接使用{}的方式更快，它不需要去调用相关的函数，而且{}应该是关键字，内部会直接调用底层C写好的代码。

可以使用**dis分析其字节码**！（赞）

{},[],()都比dict(),list(),tuple()初始化列表的性能要好，因为后者需要函数调用，消耗了更多的时间。



#### 字典可以是一个列表吗？

```python
d = {'name': 'jason', ['education']:['Tsinghua University', 'Stanford University']}
```

如上代码所示，用列表作为Key在这里是不被允许的，因为列表是一个动态变化的数据结构，字典当中的key要求是不可变的。原因也很好理解，key首先是不重复的，如果key是可以变化的话，那么随着key的变化，这里就有可能有重复的key，那么这就和字典的定义相违背；如果把这里的列表换成元组是可以的，因为元组不可变。

简单说就是，字典的键值需要不可变，而列表是动态的，可变的。可以改为元组。







## - 字符串(string)

像是日志的打印、程序中函数的注释、数据库的访问、变量的基本操作等等，都用到了字符串。

### 多引号字符串

字符串是由独立字符组成的一个序列，Python中单引号、双引号、三引号的字符串是一模一样的，没有区别。Python同时支持这三种表达方式，很重要的一个原因就是这样能方便在字符串中，内嵌带引号的字符串。

Python的三引号字符串，则主要应用于多行字符串的情境，比如函数的注释等等。

### 转义字符

同时Python也支持转义字符。所谓转义字符，就是用反斜杠开头的字符串，来表示一些特定意义的字符。常见的转义字符如下表所示。

【加入图片】



### 字符串的常用操作

Python的字符串同样支持索引、切片和遍历等操作。和其他数据结构如列表、元组一样，字符串的索引同样从0开始，index=0表示第一个元素（字符），[index:index+2]则表示第index个元素到index+1个元素组成的子字符串。

#### 字符串遍历

遍历字符串相当于遍历字符串中的每个字符。

```python
str1 = 'name'
for char in str1:
    print(char)
    
n
a
m
e
```

Python的字符串是不可变的（immutable）,Python中字符串的改变，通常只能通过创建新的字符串来完成。比如想把‘hello’的第一个h编程大写H，可以采用如下做法：

```python
str1 = 'hello'
# Option A，直接用大写的H通过加号操作符，与原字符串切片操作的子字符串拼接而成新的字符串
str2 = 'H' + str1[1:]

# Option B，直接扫描源字符串，把小写的h替换成大写的H，得到新的字符串
str2 = str2.replace('h', 'H')
print(str2)

Hello
```

#### 字符串拼接

Java中有可变的字符串类型，比如StringBuilder，每次添加、改变或删除字符（串），无需创建新的字符串，时间复杂度仅为O(1)。这样大大提高了程序的运行效率。

可惜的是，Python没有相关的数据类型，还是得老老实实地创建新的字符串。因此，每次想改变字符串，往往需要O(n)的时间复杂度，其中，n为新字符串的长度。

字符串拼接-加法操作符**加法操作符'+='，打破了字符串不可变的特性**：

```python
s = ''
for n in range(0, 100000):
    s += str(n)
print(s)
```

字符串拼接-string内置join函数

```python
list30 = []for n in range(0, 100000):    
    list30.append(str(n))
    list30 = ''.join(list30)
    print(list30)
```

#### 字符串分割函数split()

string.split(separator),表示把字符串按照separator分割成子字符串，并返回一个分割后字符串组合的列表。常应用于对数据的解析处理。比如我们读取了某个文件的路径，想要调用数据库的API，去读取对应的数据，通常会写成下面这样：

```python
def query_data(namespace, table):    
    """    
    given namespace and table, query database to get corresponding data    
    :param namespace:    
    :param table:    
    :return:    
    """    
    path = 'hive://ads/training_table'    
    namespace = path.split('//')[1].split('/')[0]  # 返回'ads'    
    table = path.split('//')[1].split('/')[1]  # 返回'training_table'    
    data = query_data(namespace, table)    
    return data
```

#### 字符串格式化

补充！



### 小结

小结部分补充！

思考题补充！







## - Python“黑箱”：输入()与输出()



### 输入输出基础



### 文件输入输出



### JSON序列化与实战



### 小结

小结部分补充！

思考题补充！并实现！

github上有讲课源码



## - 条件与循环

整篇整理！

### 条件语句





### 循环语句



### 条件与循环的复用



不支持switch语句，



### 小结

小结部分补充！

思考题补充！



## - 异常处理

### 错误与异常



### 如何处理异常



### 用户自定义异常





### 小结

小结部分补充！

思考题补充！



## - 自定义函数

### 函数基础



### 函数变量作用域



### 闭包



### 小结

小结部分补充！

思考题补充！



## - 匿名函数(lambda)

匿名函数在实际工作中同样举足轻重，正确地运用匿名函数，能让我们的代码更简洁、易读。

### 匿名函数基础



### 为什么要使用匿名函数？



### Python函数式编程



### 小结

小结部分补充！

思考题补充！



## - 面向对象

### 1. 面向对象基本思想

面向对象编程的四要素：类、属性、函数（方法）、对象（实例）。

#### 对象

#### 类

#### 继承

#### 多重继承

#### 菱形继承



### 2. 搜索引擎(search engine)

模拟敏捷开发过程中的迭代开发流程，巩固面向对象的程序设计思想。学会面向对象的建模思路。

涉及一些基础的现代搜索引擎中的基础概念，例如语料（corpus）、倒序索引（inverted index）等。









### 3.小结

小结部分补充！

思考题补充！



## - 搭建积木：Python模块化







### 小结

小结部分补充！

思考题补充！





# 二、Q&A

## 列表和元组的内部实现是怎样的？